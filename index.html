<!doctype html>
<html lang="lv">

<head>
    <meta charset="utf-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Lamutarba</title>

    <style>
        body {
            font-family: sans-serif;
        }

        #container {
            width: 50rem;
            max-width: 90%;
            margin: 0 auto;
        }

        h1 {
            color: #666;
        }

        h1 em {
            color: #000;
        }
    </style>
</head>

<body>
    <div id="container">
        <p><a href="" id="click-me">Spied te, lai būtu jauna kombinācija</a></p>

        <h1><span id="gender-me"></span> ir <em><span id="select-me"></span></em></h1>

        <p>Ideja un saturs no <a
                href="https://pilsonis.wordpress.com/2017/01/18/aizvainosanas-tabulas-jeb-lamutarbas/">Pilsoņa</a>.
            Papildinājumi no Pētera, Andra un citiem. Ja vēlies papildināt, <a
                href="https://github.com/laacz/lamutarba">tad
                lūgtum</a>.</p>
    </div>
    <script>
        /**
         * Function selects element. Taken from SO: http://stackoverflow.com/questions/11128130/select-text-in-javascript
         */
        function selectText(text) {
            const doc = document;
            if (doc.body.createTextRange) { // ms
                const range = doc.body.createTextRange();
                range.moveToElementText(text);
                range.select();
            } else if (window.getSelection) { // moz, opera, webkit
                const selection = window.getSelection();
                const range = doc.createRange();
                range.selectNodeContents(text);
                selection.removeAllRanges();
                selection.addRange(range);
            }
        }

        const els = document.querySelectorAll('#select-me');
        for (let i = 0; i < els.length; i++) {
            els[i].addEventListener('click', function (evt) {
                selectText(evt.currentTarget);
            })
        }

        /**
         * Lamutarba follows
         */

        const words = [
            [
                'dullais',
                'sasmakušais',
                'puvušais',
                'perversais',
                'tizlais',
                'nesmukais',
                'tuklais',
                'kaulainais',
                'zilais',
                'riebīgais',
                'nabadzīgais',
                'čaganais',
                'apjātais',
                'glupā',
                'īgnā',
                'runīgā',
                'dullā',
                'neķītrā',
                'nevainīgā',
                'garā',
                'kārnā',
                'garlaicīgā',
                'viltīgā',
                'bezkaunīgā',
                'dusmīgā',
                'nošņurkusī',
            ],
            [
                'aizmeža',
                'baznīcas',
                'biržu',
                'buboņu',
                'dibenķiršu',
                'dīķa',
                'dunduru',
                'grābekļu',
                'kaimiņu',
                'krūmu',
                'lieldienu',
                'lutaušu',
                'meža',
                'miķelānu',
                'nabagmājas',
                'pagraba',
                'papeļu',
                'pokaiņu',
                'purva',
                'samazgu',
                'šķūnīšu',
                'šķūņpakaļas',
                'šņabja',
                'sūdabaļļas',
                'tirgus',
                'utu',
                'vircas',
            ],
            [
                'babulnieks',
                'badsprāgstnieks',
                'bākšķis',
                'bāmodere',
                'bandžolis',
                'bezde',
                'blagūzis',
                'blākša',
                'bļausnis',
                'bļurgaļa',
                'čabgraba',
                'čamarags',
                'čāpaklis',
                'čaukurs',
                'caurdirša',
                'čība',
                'cūkaris',
                'dakšastis',
                'deivelis',
                'derglis',
                'dirskrādziņš',
                'diršļa',
                'diršļaks',
                'edarkasis',
                'elpesteris',
                'ērceša',
                'ērzelnīca',
                'gābiķis',
                'gaisāklis',
                'gāmars',
                'gatavdirša',
                'glēmausis',
                'gļēmūzis',
                'glemža',
                'gnīdausis',
                'gremzis',
                'grieztaunīca',
                'gulstavnīca',
                'gvelza',
                'īkstoņa',
                'īnaģis',
                'jāklis',
                'jātaļnieks',
                'jērgālis',
                'kaimāksis',
                'kākalnīca',
                'kankarbiksis',
                'karčaunīca',
                'kārkaļa',
                'kārumdirša',
                'ķēkša',
                'ķepasts',
                'ķerstakla',
                'ķirmis',
                'kladaņķis',
                'klamasteris',
                'klemza',
                'klibzaķis',
                'kļocka',
                'knakstaža',
                'krabis',
                'krizdole',
                'kulduris',
                'kuņa',
                'laidaks',
                'lankaris',
                'larkšķis',
                'lebeznieks',
                'lepecis',
                'lešķene',
                'lorķis',
                'lubraks',
                'maistuļa',
                'mantjēcis',
                'mānūžnieks',
                'maukumēbele',
                'maukuris',
                'mesākls',
                'migaža',
                'mindža',
                'mindža',
                'mīzelnīca',
                'mukausis',
                'mūrguļa',
                'nepierīža',
                'ņerga',
                'ņirpsis',
                'nūžala',
                'ošnāsis',
                'pakaļnīca',
                'pāķis',
                'pežuveste',
                'pidelkaķe',
                'piepe',
                'pimpausis',
                'pipelbrencis',
                'pirža',
                'pīters',
                'pļēgurs',
                'plegzderis',
                'pleika',
                'plenderis',
                'plēsauka',
                'plikatnieks',
                'puktiņš',
                'pundurpūslis',
                'ragana',
                'riekla',
                'rīstuķis',
                'šelderis',
                'slampača',
                'šleberis',
                'šlenderis',
                'šļurbaks',
                'smerdelis',
                'smirluģis',
                'sunkārsis',
                'svelstiķis',
                'tāpslis',
                'temša',
                'timaļa',
                'trāvulis',
                'tūža',
                'ubiķis',
                'ūbiķis',
                'ūksts',
                'žākara',
                'žārgalis',
                'žauklis',
                'žauna',
                'zīdeklis',
                'žlēmēkslis',
                'žnergatabluzga',
                'žūklis',
                'žūpa',
                'žūpacis',
            ],
        ];

        function isGender(word, female) {
            const male = word.endsWith('s') || word.endsWith('š');
            return (female && !male) || (!female && male);
        }

        function make() {
            const ret = [];

            ret.push(words[0][Math.floor(Math.random() * words[0].length)]);
            ret.push(words[1][Math.floor(Math.random() * words[1].length)]);

            const female = ret[0].endsWith('ī') || ret[0].endsWith('ā');
            const filteredWords = words[2].filter(word => isGender(word, female));

            ret.push(filteredWords[Math.floor(Math.random() * filteredWords.length)]);

            document.querySelector('#select-me').innerText = ret.join(' ');
            document.querySelector('#gender-me').innerText = female ? 'Viņa' : 'Viņš';
        }

        document.addEventListener('DOMContentLoaded', function () {
            make();
            document
                .querySelector('#click-me')
                .addEventListener('click', (e) => {
                    make();
                    e.preventDefault();
                });
        });
    </script>
</body>

</html>
